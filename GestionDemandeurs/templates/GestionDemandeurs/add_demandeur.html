{% load static %}
{% load widget_tweaks %}

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>DonVia - Inscription</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <link href="{% static 'img/favicon.ico' %}" rel="icon">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Saira:wght@500;600;700&display=swap" rel="stylesheet">

  <!-- Libraries -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
  <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet">
  <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">

  <!-- Bootstrap & Custom -->
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'css/style.css' %}" rel="stylesheet">
</head>

<body>
  <!-- Spinner Start -->
  <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
    <div class="spinner-grow text-primary" role="status"></div>
  </div>
  <!-- Spinner End -->

  <!-- Navbar Start -->
  <div class="container-fluid fixed-top px-0 wow fadeIn" data-wow-delay="0.1s">
    <nav class="navbar navbar-expand-lg navbar-dark py-lg-0 px-lg-5 wow fadeIn" data-wow-delay="0.1s">
      <a href="/" class="navbar-brand ms-4 ms-lg-0">
        <h1 class="fw-bold text-primary m-0">Don <span class="text-white">Via</span></h1>
      </a>
      <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto p-4 p-lg-0">
          <a href="/" class="nav-item nav-link active">Accueil</a>
          <a href="/about" class="nav-item nav-link">À propos</a>
          <a href="/evenements" class="nav-item nav-link">Événements</a>
          <a href="/contact" class="nav-item nav-link">Contact</a>
        </div>
        <div class="d-none d-lg-flex ms-2">
          <a class="btn btn-primary py-2 px-3 me-2" href="/donors">
            <i class="fa fa-heart me-2"></i>Faire un don
          </a>
        </div>
      </div>
    </nav>
  </div>
  <!-- Navbar End -->

<!-- Hero Section Start -->
<section class="hero-section">
    <div class="hero-background" style="background-image: url('{% static 'img/courses-2.jpg' %}');"></div>
    <div class="hero-overlay"></div>
    <div class="container h-100 d-flex justify-content-center" style="padding-top: 20vh; padding-bottom: 15vh;">
      <div class="card p-5 shadow wow fadeInUp" data-wow-delay="0.3s" style="max-width: 800px; z-index: 3; width: 100%;">
        <h3 class="text-center mb-4">Inscription Demandeur</h3>

        <!-- Django Messages -->
        {% if messages %}
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          {% endfor %}
        {% endif %}

        <!-- Form Errors -->
        {% if form.errors %}
          <div class="alert alert-danger">
            <strong>Erreurs dans le formulaire:</strong>
            <ul>
              {% for field, errors in form.errors.items %}
                {% for error in errors %}
                  <li>{{ field }}: {{ error }}</li>
                {% endfor %}
              {% endfor %}
            </ul>
          </div>
        {% endif %} 

        <!-- Django Form Start -->
        <form method="POST" enctype="multipart/form-data" action="{% url 'add_demandeur' %}">
          {% csrf_token %}
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Nom</label>
              {{ form.nom_user|add_class:"form-control" }}
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Prénom</label>
              {{ form.prenom_user|add_class:"form-control" }}
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">CIN</label>
              {{ form.cin_user|add_class:"form-control" }}
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Email</label>
              {{ form.email_user|add_class:"form-control" }}
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Mot de passe</label>
              {{ form.mdp|add_class:"form-control" }}
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Confirmer le mot de passe</label>
              {{ form.confirm_mdp|add_class:"form-control" }}
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Sexe</label>
              {{ form.sexe_user|add_class:"form-select" }}
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Date de naissance</label>
              {{ form.DateNaissance|add_class:"form-control" }}
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Téléphone</label>
              {{ form.telephone_user|add_class:"form-control" }}
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Adresse</label>
              {{ form.adresse|add_class:"form-control" }}
            </div>
            <div class="col-md-12 mb-3">
              <label class="form-label">Institution</label>
              {{ form.institution|add_class:"form-select" }}
            </div>
            <div class="col-md-12 mb-3">
              <label class="form-label">Documents justificatifs</label>
              {{ form.justificatifs|add_class:"form-control" }}
            </div>
          </div>
          <button type="submit" class="btn btn-primary w-100 mt-3">S'inscrire</button>
        </form>
        <!-- Django Form End -->
      </div>
    </div>
  </section>
  <!-- Hero Section End -->

  <!-- Footer Start -->
  <div class="container-fluid bg-dark text-white-50 footer mt-5 pt-5 wow fadeIn" data-wow-delay="0.1s">
    <div class="container py-5 text-center">
      <p>&copy; DonVia - Tous droits réservés.</p>
    </div>
  </div>
  <!-- Footer End -->

  <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{% static 'lib/wow/wow.min.js' %}"></script>
  <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
  <script src="{% static 'js/main.js' %}"></script>

  <script>
    // Hide spinner on page load
    window.addEventListener('load', function() {
      document.getElementById('spinner').classList.remove('show');
    });
  </script>
</body>
</html>
